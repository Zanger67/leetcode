# 1792. [Maximum Average Pass Ratio](<https://leetcode.com/problems/maximum-average-pass-ratio>)

*All prompts are owned by LeetCode. To view the prompt, click the title link above.*

*[Back to top](<../README.md>)*

------

> *First completed : September 01, 2025*
>
> *Last updated : September 01, 2025*

------

> **Related Topics** : **[Array](<by_topic/Array.md>), [Greedy](<by_topic/Greedy.md>), [Heap (Priority Queue)](<by_topic/Heap (Priority Queue).md>)**
>
> **Acceptance Rate** : **71.6 %**

------

> Very interesting question. Simple in terms of it being a greedy heap question, but fascinating in terms of how it highlights how ratios change as you augment them.
> 
> I initially assumed that we'd simply be adding to the class that's denominator was the smallest since it'd have the largest ratio effect since smaller ratios are more sensitive.
> 
> I then thought that for ratios with equal denominators, you should apply it to the case with a smaller numerator since the larger case is more "stable" and would "gain" less since its existing numerator amount would "decrease" a more since the increased denominator also affects it.
> 
> Then I realized that this isn't always true so I adjusted the heap to be based on a precomputed heuristic that is the benefit of adding a excelling student to the given class directly. I'm curious as to the math and logical reasoning that causes this though! Will keep digging :D
> 

------

## Solutions

- [m1792.py](<../my-submissions/m1792.py>)
### Python
#### [m1792.py](<../my-submissions/m1792.py>)
```Python
class Solution:
    def maxAverageRatio(self, classes: List[List[int]], extraStudents: int) -> float:

        # Min heap not including 100% ratios since
        # their ratios wouldn't change
        # (-1 * amount of ratio gain, total students, passing students)
        hp = [
            ((passing / tot - (passing + 1) / (tot + 1)), tot, passing) 
            for passing, tot in classes 
            if tot != passing
        ]
        heapify(hp)

        while hp and extraStudents :
            _, tot, passing = heappop(hp)

            tot += 1
            passing += 1
            heappush(hp, ((passing / tot - (passing + 1) / (tot + 1)), tot, passing))
            extraStudents -= 1

        return (sum(passing / tot for _, tot, passing in hp) + (len(classes) - len(hp))) / len(classes)
```

